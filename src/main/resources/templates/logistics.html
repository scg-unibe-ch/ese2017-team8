<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>Hello Logistician!</title>
		<style>
			table {
				border-collapse: collapse;
			}

			td, th {
				border: 1px solid black;
				padding: 5px;
			}
		</style>
		<script>
            function submitDriver(id){
                var driver = document.getElementById("driverName"+id).value;
                var row = document.getElementById(id);
                row.parentNode.removeChild(row);
                alert(driver);
            }
		</script>
	</head>
	<body>
		<h1>Backend Logistik</h1>
		<h2>Erfasste Bestellungen</h2>
		<!-- TODO: create a form that asigns packages to drivers -->
		<form action="#" method="post">
			<table>
				<thead>
					<tr>
						<th>Bestell ID</th>
						<th>Produkt</th>
						<th>Preis in CHF</th>
						<th>Menge</th>
						<th>Bestelldatum</th>
						<th>Kunden ID</th>
						<th>Fahrer</th>
					</tr>
				</thead>
				<tbody>
					<th:block th:each="order, iterStat : ${allOrders}">
						<tr th:id="${iterStat.index}">
							<td th:text="${order.id}">...</td>
							<td th:text="${order.product}">...</td>
							<td th:text="${order.price}">...</td>
							<td th:text="${order.quantity}">...</td>
							<td th:text="${#dates.format(order.purchaseOrderDate, 'yyyy/MM/dd')}"></td>
							<td th:text="${order.customerId}">...</td>
							<td>
								<!-- here every package get its driver -->
								<select th:id="${'driverName'+iterStat.index}">
									<option disabled="disabled" selected="selected">Fahrer w√§hlen</option>
									<th:block th:each="driver : ${allDrivers}">
										<option th:text="${driver}">...</option>
									</th:block>
								</select>
								<!--<input type="button" value="Fahrer zuweisen" th:attr="onclick='javascript:submitDriver(\'' + ${iterStat.index} + '\');'"/>-->
							</td>
						</tr>
					</th:block>
				</tbody>
			</table>
			<input type="submit" name="selectDriver" value="fahrer zuweisen" />
		</form>

		<h2>Neue Bestellung erfassen</h2>
		<form action="#" th:action="@{/logistics}" th:object="${order}" method="post">
			<table>
				<tr>
					<td><label for="ordered_product_name">Produkt</label></td>
					<td><input id="ordered_product_name" type="text" th:field="*{product}" required="required"/></td>
				</tr>
				<tr>
					<td><label for="ordered_price">Preis in CHF</label></td>
					<td><input id="ordered_price" type="number" min="0.00" step="0.05" th:field="*{price}" required="required"/></td>
				</tr>
				<tr>
					<td><label for="ordered_quantity">Menge</label></td>
					<td><input id="ordered_quantity" type="number" min="1" value="1" th:field="*{quantity}" required="required"/></td>
				</tr>
				<tr>
					<td><label for="ordered_date">Bestelldatum</label></td>
					<td><input id="ordered_date" type="text" th:field="*{purchaseOrderDate}" required="required" placeholder="YYYY/MM/DD" pattern="[0-9]{4}/(0[1-9]|1[012])/(0[1-9]|1[0-9]|2[0-9]|3[01])"/></td>
				</tr>
				<tr>
					<td><label for="ordered_cutomer">Kunden ID</label></td>
					<td><input id="ordered_cutomer" type="number" th:field="*{customerId}" required="required" /></td>
				</tr>
			</table>
			<p><input type="submit" value="Submit" /> <input type="reset" value="Reset" /></p>
		</form>
		<a th:href="@{/logout}">Logout</a>
	</body>
</html>
